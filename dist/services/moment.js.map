{"version":3,"file":"moment.js","sources":["../../src/services/moment.js"],"sourcesContent":["import Service from '@ember/service';\nimport Evented from '@ember/object/evented';\nimport { getOwner } from '@ember/application';\nimport { momentOrMomentTimezone as moment } from '../index.js';\nimport { computed, set, setProperties } from '@ember/object';\n\n// eslint-disable-next-line ember/no-classic-classes\nexport default Service.extend(Evented, {\n  _timeZone: null,\n\n  locale: null,\n  localeOptions: null,\n  defaultFormat: null,\n\n  init() {\n    this._super();\n    this.defaultFormat = this.__config__.outputFormat;\n  },\n\n  __config__: computed(function () {\n    let config = getOwner(this).factoryFor('config:environment').class || {};\n\n    return config['ember-moment'] || {};\n  }).readOnly(),\n\n  timeZone: computed('_timeZone', {\n    get() {\n      return this._timeZone;\n    },\n\n    set(propertyKey, timeZone) {\n      if (!moment.tz) {\n        /* eslint-disable no-console */\n        console.warn(\n          '[ember-moment] attempted to set timezone, but moment-timezone is not setup.',\n        );\n        return;\n      }\n\n      set(this, '_timeZone', timeZone);\n\n      return timeZone;\n    },\n  }),\n\n  setLocale(locale) {\n    this.changeLocale(locale);\n  },\n\n  updateLocale(locale, localeOptions = {}) {\n    this.changeLocale(locale, localeOptions);\n  },\n\n  changeLocale(locale, localeOptions = {}) {\n    setProperties(this, {\n      locale,\n      localeOptions,\n    });\n    moment.updateLocale(locale, localeOptions);\n    this.trigger('localeChanged', locale);\n  },\n\n  setTimeZone(timeZone) {\n    this.changeTimeZone(timeZone);\n  },\n\n  changeTimeZone(timeZone) {\n    set(this, 'timeZone', timeZone);\n    this.trigger('timeZoneChanged', timeZone);\n  },\n\n  isMoment(obj) {\n    return moment.isMoment(obj);\n  },\n\n  moment() {\n    let momentObj = moment(...arguments);\n    let { locale, timeZone } = this;\n\n    if (locale && momentObj.locale) {\n      momentObj = momentObj.locale(locale);\n    }\n\n    if (timeZone && momentObj.tz) {\n      momentObj = momentObj.tz(timeZone);\n    }\n\n    return momentObj;\n  },\n\n  utc() {\n    let momentObj = moment.utc(...arguments);\n\n    let { locale } = this;\n\n    if (locale && momentObj.locale) {\n      momentObj = momentObj.locale(locale);\n    }\n\n    return momentObj;\n  },\n});\n"],"names":["Service","extend","Evented","_timeZone","locale","localeOptions","defaultFormat","init","_super","__config__","outputFormat","computed","config","getOwner","factoryFor","class","readOnly","timeZone","get","set","propertyKey","moment","tz","console","warn","setLocale","changeLocale","updateLocale","setProperties","trigger","setTimeZone","changeTimeZone","isMoment","obj","momentObj","arguments","utc"],"mappings":"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"}